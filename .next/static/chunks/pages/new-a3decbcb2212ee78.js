(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[971],{5832:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/new",function(){return n(8650)}])},7443:function(e,t,n){"use strict";n.d(t,{s:function(){return h}});var r=n(5893),o=n(2072),i=n(5428),a=n(4952),u=n(7097),s=n(6498),c=n(1163),l=n(7294),f=(n(5697),"Invariant failed");var d=function(e){null!=e&&"function"!==typeof e&&function(e,t){if(!e)throw new Error(f)}(!1);var t=(0,l.useRef)();(0,l.useEffect)((function(){t.current=function(t){var n=null===e||void 0===e?void 0:e(t);return"string"===typeof n?t.returnValue=n:t.defaultPrevented?t.returnValue="":void 0}}),[e]),(0,l.useEffect)((function(){var e=function(e){return t.current(e)};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[])};var b=n(7536);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){m(e,t,n[t])}))}return e}function h(e){var t=e.defaultValues,n=e.isSubmitting,f=e.backTo,m=e.onSubmit,h=(0,b.cI)({defaultValues:t}),g=h.control,v=h.register,y=h.formState,x=h.getValues,w=h.reset,j=h.handleSubmit;!function(e){var t=e.formState,n=e.message,r=void 0===n?"Are you sure to leave without saving?":n,o=(0,c.useRouter)(),i=t.isDirty,a=l.useCallback((function(){if(i){if(window.confirm(r))return!0;throw"Abort route change by user's confirmation."}}),[i,r]);l.useEffect((function(){return o.events.on("routeChangeStart",a),function(){o.events.off("routeChangeStart",a)}}),[o.events,a]),d((function(e){i&&e.preventDefault()}))}({formState:y});var O=y.isSubmitSuccessful;return l.useEffect((function(){O&&w(x())}),[O,w,x]),(0,r.jsxs)("form",{onSubmit:j(m),children:[(0,r.jsx)(s.n,p({},v("title",{required:!0}),{label:"Title",autoFocus:!0,required:!0,className:"text-lg font-semibold !py-1.5"})),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)(b.Qr,{name:"content",control:g,rules:{required:!0},render:function(e){var t=e.field;return(0,r.jsx)(u.c,{label:"Post",value:t.value,onChange:t.onChange,onTriggerSubmit:j(m),required:!0})}})}),(0,r.jsxs)("div",{className:"flex items-center justify-between gap-4 mt-8",children:[(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)(o.z,{type:"submit",isLoading:n,loadingChildren:"".concat(t?"Saving":"Publishing"),children:(null===t||void 0===t?void 0:t.title)?"Save":"Publish"}),(0,r.jsx)(i.Z,{href:f,variant:"secondary",children:"Cancel"})]}),!n&&(0,r.jsxs)("a",{href:"https://docs.github.com/en/github/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax",target:"_blank",rel:"noreferrer",className:"flex items-center gap-2 transition-colors text-secondary hover:text-blue",children:[(0,r.jsx)(a.Bu,{}),(0,r.jsx)("span",{className:"text-xs",children:"Markdown supported"})]})]})]})}},6498:function(e,t,n){"use strict";n.d(t,{n:function(){return s}});var r=n(5893),o=n(370);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}function u(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=n(7294).forwardRef((function(e,t){var n=e.label,i=e.id,s=e.name,c=e.type,l=void 0===c?"text":c,f=e.className,d=u(e,["label","id","name","type","className"]);return(0,r.jsxs)("div",{children:[n&&(0,r.jsx)("label",{htmlFor:i||s,className:"block mb-2 font-semibold",children:n}),(0,r.jsx)("input",a({},d,{ref:t,id:i||s,name:s,type:l,className:(0,o.A)("block w-full py-1 rounded shadow-sm bg-secondary border-secondary focus-ring",f)}))]})}));s.displayName="TextField"},8650:function(e,t,n){"use strict";n.r(t);var r=n(5893),o=n(7135),i=n(7443),a=n(4245),u=n(9008),s=n(1163),c=n(2620),l=function(){var e=(0,s.useRouter)(),t=a.S.useMutation("post.add",{onError:function(e){c.ZP.error("Something went wrong: ".concat(e.message))}});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.default,{children:(0,r.jsx)("title",{children:"New Post - Beam"})}),(0,r.jsx)("h1",{className:"text-2xl font-semibold tracking-tight md:text-3xl",children:"New post"}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)(i.s,{isSubmitting:t.isLoading,defaultValues:{title:"",content:""},backTo:"/",onSubmit:function(n){t.mutate({title:n.title,content:n.content},{onSuccess:function(t){return e.push("/post/".concat(t.id))}})}})})]})};l.auth=!0,l.getLayout=function(e){return(0,r.jsx)(o.A,{children:e})},t.default=l},2703:function(e,t,n){"use strict";var r=n(414);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},5697:function(e,t,n){e.exports=n(2703)()},414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},function(e){e.O(0,[33,364,543,416,135,97,774,888,179],(function(){return t=5832,e(e.s=t);var t}));var t=e.O();_N_E=t}]);